<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Ripla (by aktion-hip)</title>

    <link rel="stylesheet" href="../stylesheets/styles.css">
    <link rel="stylesheet" href="../stylesheets/pygment_trac.css">
    <script src="../javascripts/scale.fix.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1 class="header"><a href="https://github.com/aktion-hip/ripla">Ripla</a></h1>
        <p class="header">Rich Platform project for Java web applications.</p>
        <ul>
          <li class="download"><a class="buttons" href="https://github.com/aktion-hip/ripla/zipball/master">Download ZIP</a></li>
          <li class="download"><a class="buttons" href="https://github.com/aktion-hip/ripla/tarball/master">Download TAR</a></li>
          <li><a class="buttons github" href="https://github.com/aktion-hip/ripla">View On GitHub</a></li>
        </ul>
        <p class="header">This project is maintained by <a class="header name" href="https://github.com/aktion-hip">aktion-hip</a></p>
      </header>
      
      <sidebar>
      	<ul>
          <li><a class="navigation" href="./">Create application</a></li>
          <li><a class="navigation" href="../extend/">Extend platform</a></li>
      	</ul>
      </sidebar>
      
      <section>
        <h2>Create an application bundle</h2>
		<p>The application’s main bundle is a bundle containing a class deriving and extending <code>org.ripla.web.RiplaApplication</code>. <code>RiplaApplication</code> extends <code>com.vaadin.Application</code>, 
		thus, by extending <code>RiplaApplication</code>, your application becomes a Vaadin application.</p>
			<p>
				Your application class has to override at least the method
				<code>RiplaApplication.createWindow()</code>. In this method, you have to create
				and configure a Vaadin window which becomes the application’s main
				window. In addition, you can override
				<code>RiplaApplication.getAppConfiguration()</code>. This method returns a
				<code>org.ripla.web.interfaces.IAppConfiguration</code> object. With such an
				object, you can configure your Ripla application (e.g. the ID of the
				default skin, the welcome message etc.). See <a target="_blank" href="https://github.com/aktion-hip/ripla/blob/master/org.ripla.demo/src/org/ripla/demo/DemoApplication.java">DemoApplication.java</a>
				for an example.
			</p>
			<p>In Java servlet terminology, your application class is the servlet. For to run the application in the web browser, 
			you have to register the servlet with the servlet container, i.e. you have to map the servlet name to your application class.
			Ripla is using <a href="http://www.perplentropy.com/2010/02/in-bed-with-vaadin-and-osgi.html" target="_blank">Chris Brind's concepts</a> 
			to marriage Vaadin with the servlet part. Thus, the mapping is done in the OSGi service definition file. 
			You have to specify your application component as factory component with the <code>vaadin.app</code> as factory name and
			with your application class as implementation class. The component's name is used as servlet name. E.g. <code>OSGI-INF/myapp.xml</code>:
			</p>
			<pre>&lt;?xml version="1.0" encoding="UTF-8"?>
&lt;scr:component xmlns:scr="http://www.osgi.org/xmlns/scr/v1.1.0" <br />     <strong>factory=&quot;vaadin.app&quot;</strong> immediate=&quot;false&quot; <strong>name=&quot;myapp&quot;</strong>&gt;
   <strong>&lt;implementation class=&quot;org.example.MyApplication&quot;/&gt;</strong>
&lt;/scr:component&gt;</pre>
			<p><code>RiplaApplication</code> contains several bind methods for that the OSGi container can inject declarative services. 
			For that these services are effectively injected into your application, you have to provide an OSGi service definition declaring these services. 
			<br>See <a href="https://github.com/aktion-hip/ripla/blob/master/org.ripla.demo/OSGI-INF/demo.xml" target="_blank">OSGI-INF/demo.xml</a> for an example:
		</p>        
		<pre>
&lt;?xml version="1.0" encoding="UTF-8"?>
&lt;scr:component xmlns:scr="http://www.osgi.org/xmlns/scr/v1.1.0" factory="vaadin.app" <br/>        immediate="false" name="demo">
   &lt;implementation class="org.ripla.demo.DemoApplication"/>
   &lt;reference interface="org.ripla.web.services.IUseCase" cardinality="0..n" <br/>        bind="addUseCase" unbind="removeUseCase" name="usecase" policy="dynamic"/>   
   &lt;reference interface="org.ripla.web.services.IExtendibleMenuContribution" cardinality="0..n" <br/>        bind="registerMenuContribution" unbind="unregisterMenuContribution" name="extendibleContributions" policy="dynamic"/>   
   &lt;reference interface="org.ripla.web.services.ISkin" cardinality="0..n" <br/>        bind="registerSkin" unbind="unregisterSkin" name="skin" policy="dynamic"/>   
   &lt;reference interface="org.ripla.web.services.IToolbarItem" cardinality="0..n" <br/>        bind="registerToolbarItem" unbind="unregisterToolbarItem" name="toolbar" policy="dynamic"/>   
   &lt;reference interface="org.ripla.web.services.IPermissionEntry" cardinality="0..n" <br/>        bind="registerPermission" unbind="unregisterPermission" name="permissions" policy="dynamic"/>   
   &lt;reference interface="org.osgi.service.prefs.PreferencesService" cardinality="1..n" <br/>        bind="setPreferences" unbind="unsetPreferences" name="preferences" policy="dynamic"/>
   &lt;reference interface="org.osgi.service.event.EventAdmin" cardinality="1..n" <br/>        bind="setEventAdmin" unbind="unsetEventAdmin" name="eventadmin" policy="dynamic"/>
   &lt;reference interface="org.osgi.service.useradmin.UserAdmin" cardinality="0..n" <br/>        bind="setUserAdmin" unbind="unsetUserAdmin" name="useradmin" policy="dynamic"/>
   &lt;service>
      &lt;provide interface="org.osgi.service.event.EventHandler"/>
   &lt;/service>
   &lt;property name="event.topics" type="String" value="org/ripla/web/ControllerEvent/*"/>
&lt;/scr:component></pre>
		<h3>Declarative Services used in Ripla</h3>
		<dl>
		<dt>org.ripla.web.services.IUseCase</dt>
		<dd>the Ripla service to manage the configured use cases</dd>
		<dt>org.ripla.web.services.ISkin</dt>
		<dd>the Ripla service to manage skins</dd>
		<dt>org.ripla.web.services.IToolbarItem</dt>
		<dd>the Ripla service to manage the entries for the application's toolbar</dd>
		<dt>org.ripla.web.services.IExtendibleMenuContribution</dt>
		<dd>the Ripla service to manage the menus for an extendible menu</dd>
		<dt>org.ripla.web.services.IPermissionEntry</dt>
		<dd>the Ripla service to manage permission entries</dd>
		<dt>org.osgi.service.prefs.PreferencesService</dt>
		<dd>the OSGi preferences service to manage the application's preferences and settings</dd>
		<dt>org.osgi.service.event.EventAdmin</dt>
		<dd>the OSGi event admin service for event handling</dd>
		<dt>org.osgi.service.useradmin.UserAdmin</dt>
		<dd>the OSGi user admin service for user administration</dd>
		</dl>	
      </section>
      <footer>
        <p><small>Hosted on <a href="https://pages.github.com">GitHub Pages</a> using the Dinky theme</small></p>
      </footer>
    </div>
    <!--[if !IE]><script>fixScale(document);</script><!--<![endif]-->
		
  </body>
</html>